<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="global.css" />
    <link rel="stylesheet" href="rules.css" />
    <script
      defer
      src="https://kit.fontawesome.com/aa06e5f929.js"
      crossorigin="anonymous"
    ></script>
    <meta name="description" content="Rules of the game" />
    <link
      rel="shortcut icon"
      href="../assets/images/logo.png"
      type="image/x-icon"
    />
    <title>Rules</title>
  </head>
  <body>
    <header>
      <div class="logo">
        <img src="../assets/images/logo.png" alt="" />
      </div>
      <nav>
        <ul class="navbar-list">
          <li>
            <a href="/">
              <i class="fas fa-house"></i>
              <span class="nav-link">Home</span></a
            >
          </li>
          <li>
            <a href="/rules"
              ><i class="fas fa-clipboard-check"></i
              ><span class="nav-link">Rules</span></a
            >
          </li>
          <li>
            <a href="/cards"
              ><i class="fas fa-sheet-plastic"></i
              ><span class="nav-link">Cards</span></a
            >
          </li>
        </ul>
      </nav>
      <div class="login">
        <i class="fas fa-right-to-bracket"></i>
      </div>
      <div class="user hidden">
        <i class="fas fa-user-large"></i>
      </div>
      <div class="forms hidden">
        <form class="login-form" onsubmit="handleLogin(event)">
          <label for="login-email">Email adress</label>
          <input type="email" id="login-email" />
          <label for="login-password">Password</label>
          <input type="password" id="login-password" />
          <button type="submit">Login</button>

          <span class="tip">Register</span>
        </form>

        <form class="register-form hidden" onsubmit="handleRegister(event)">
          <label for="register-email">Email adress</label>
          <input type="email" id="register-email" />
          <label for="name">Username</label>
          <input type="text" id="name" />
          <label for="register-password">Password</label>
          <input type="password" id="register-password" />
          <button type="submit">Register</button>
          <span class="tip">Login</span>
        </form>

        <div class="user-menu hidden">
          <p class="user-name"></p>
          <p class="user-email"></p>
          <a href="/profile"><button>Profil</button></a>
          <button class="logout">
            <i class="fas fa-user-large-slash"></i>Logout
          </button>
        </div>
      </div>
      <script>
        const loginButton = document.querySelector(".login");
        const forms = document.querySelector(".forms");
        loginButton.addEventListener("click", () => {
          forms.classList.toggle("hidden");
        });

        function loginStatus() {
          if (localStorage.getItem("token")) {
            document.querySelector(".login").classList.add("hidden");
            document.querySelector(".user").classList.remove("hidden");
            document.querySelector(".forms").classList.add("hidden");
          } else {
            document.querySelector(".login").classList.remove("hidden");
            document.querySelector(".user").classList.add("hidden");
            document.querySelector(".forms").classList.add("hidden");
            document.querySelector(".user-menu").classList.add("hidden");
            document.querySelector(".login-form").classList.remove("hidden");
          }
        }
        loginStatus();

        function handleLogin(e) {
          e.preventDefault();
          const email = document.getElementById("login-email").value;
          const password = document.getElementById("login-password").value;
          fetch("/api/auth/login", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, password }),
          })
            .then((response) => response.json())
            .then((data) => {
              localStorage.setItem("token", data.token);
              forms.classList.add("hidden");
              document.querySelector("#login-email").value = "";
              document.querySelector("#login-password").value = "";
              loginStatus();
            })
            .catch((error) => {
              console.error("There was an error!", error);
            });
        }

        function handleRegister(e) {
          e.preventDefault();
          const email = document.getElementById("register-email").value;
          const name = document.getElementById("name").value;
          const password = document.getElementById("register-password").value;
          fetch("/api/users", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, name, password }),
          })
            .then((response) => response.json())
            .then((data) => {
              localStorage.setItem("token", data.token);
              forms.classList.add("hidden");
              loginStatus();
            })
            .catch((error) => {
              console.error("There was an error!", error);
            });
        }

        const logoutButton = document.querySelector(".logout");
        logoutButton.addEventListener("click", () => {
          localStorage.removeItem("token");
          loginStatus();
        });

        const userMenuButton = document.querySelector(".user");
        const userMenu = document.querySelector(".user-menu");
        const loginForm = document.querySelector(".login-form");
        userMenuButton.addEventListener("click", () => {
          forms.classList.toggle("hidden");
          userMenu.classList.toggle("hidden");
          loginForm.classList.add("hidden");
          fetch("/api/me/profile", {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${localStorage.getItem("token")}`,
            },
          })
            .then((response) => response.json())
            .then((data) => {
              document.querySelector(".user-name").innerText = data.name;
              document.querySelector(".user-email").innerText = data.email;
            })
            .catch((error) => {
              console.error("There was an error!", error);
            });
        });

        const tip = document.querySelectorAll(".tip");
        tip.forEach((element) => {
          element.addEventListener("click", () => {
            document.querySelector(".login-form").classList.toggle("hidden");
            document.querySelector(".register-form").classList.toggle("hidden");
          });
        });
      </script>
      <input type="checkbox" id="burger-toggle" />
      <label for="burger-toggle" class="burger-icon">
        <i class="fas fa-bars"></i>
      </label>
      <div class="burger-menu">
        <ul class="burger-menu-list">
          <li>
            <a href="/">
              <i class="fas fa-house"></i>
              <span>Home</span>
            </a>
          </li>
          <li>
            <a href="/rules">
              <i class="fas fa-clipboard-check"></i>
              <span>Rules</span>
            </a>
          </li>
          <li>
            <a href="/cards">
              <i class="fas fa-sheet-plastic"></i>
              <span>Cards</span>
            </a>
          </li>
        </ul>
      </div>
      <script defer>
        const burgerToggle = document.getElementById("burger-toggle");
        const burgerMenu = document.querySelector(".burger-menu");
        burgerToggle.addEventListener("change", () => {
          if (burgerToggle.checked) {
            burgerMenu.style.transform = "scaleY(1)";
          } else {
            burgerMenu.style.transform = "scaleY(0)";
          }
        });
      </script>
    </header>
    <main>
      <section class="rules">
        <h1>Règles</h1>
<p>
  Bienvenue dans le monde magique d'Harry Potter! Ce jeu vous transporte à Poudlard, où vous devez affronter d'autres sorciers dans des duels de sorts passionnants. Voici les règles :
  <ul>
    <li>Chaque joueur commence avec 100 points de vie.</li>
    <li>Le premier joueur à réduire les points de vie de son adversaire à zéro remporte le duel.</li>
    <li>Les sorts sont lancés en alternance. Chaque joueur lance un sort à son tour.</li>
    <li>Vous pouvez choisir parmi une variété de sorts tels que Expelliarmus, Stupefy, Petrificus Totalus, etc.</li>
    <li>Chaque sort inflige des dégâts différents et a une chance différente de toucher.</li>
    <li>Les joueurs peuvent également utiliser des potions pour restaurer leur santé ou pour augmenter la puissance de leurs sorts.</li>
    <li>Le jeu se déroule sur un plateau virtuel représentant différents lieux emblématiques de Poudlard, chacun offrant ses propres avantages et défis.</li>
  </ul>
  Que la magie soit avec vous!
</p>

<h1>Équipement</h1>
<p>
  Avant de vous aventurer dans les duels de sorts, assurez-vous d'avoir l'équipement nécessaire :
  <ul>
    <li>Baguette magique : Votre outil indispensable pour lancer des sorts. Choisissez votre baguette avec soin, car elle peut influencer la puissance et la précision de vos sorts.</li>
    <li>Robe de sorcier : Non seulement élégante, mais aussi fonctionnelle. Votre robe de sorcier vous protège des sorts adverses et vous donne une aura mystique.</li>
    <li>Potion de guérison : En cas d'urgence, une potion de guérison peut vous sauver la vie en restaurant une partie de vos points de vie.</li>
    <li>Parchemins et plumes : Pour prendre des notes sur vos adversaires et développer de nouvelles stratégies de duel.</li>
  </ul>
  Assurez-vous d'être bien préparé avant de franchir les portes de la grande salle!
</p>

<h1>Objet</h1>
<p>
  Dans ce jeu, votre objectif est de devenir le plus puissant des sorciers de Poudlard. Défiez vos adversaires, maîtrisez de nouveaux sorts, explorez les secrets de l'école et forgez votre propre destinée magique.
</p>

<h1>Mise en place</h1>
<p>
  Avant de commencer votre aventure, suivez ces étapes de mise en place :
  <ul>
    <li>Choisissez votre maison à Poudlard : Gryffondor, Serpentard, Serdaigle ou Poufsouffle.</li>
    <li>Équipez-vous avec votre baguette, votre robe et vos potions.</li>
    <li>Apprenez les sorts de base et entraînez-vous dans la salle de duel.</li>
    <li>Explorez les couloirs de Poudlard pour découvrir des objets magiques et des alliés.</li>
    <li>Préparez-vous mentalement et stratégiquement pour affronter les défis qui vous attendent.</li>
  </ul>
  Une fois que vous êtes prêt, levez votre baguette et montrez au monde la puissance de votre magie!
</p>

      </section>
      <section class="reviews">
        <h1>Avis</h1>
        <div>
          <div class="review">
            <h2>Lina Pope</h2>
            <div class="review-rating">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
              <i class="far fa-star"></i>
              <i class="far fa-star"></i>
            </div>
            <p>
              J'ai trouvé cette expérience magique! Les duels de sorts étaient passionnants, mais je pense qu'il y a encore place à l'amélioration. J'ai adoré explorer les différents lieux de Poudlard, mais j'aurais aimé plus d'options de sorts. Néanmoins, c'était une expérience formidable et je recommande vivement à tous les fans d'Harry Potter!
            </p>
          </div>
          <div class="review">
            <h2>Vernon Fowler</h2>
            <div class="review-rating">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
              <i class="far fa-star"></i>
            </div>
            <p>
              Une expérience incroyable! Les duels étaient intenses et excitants. J'ai particulièrement apprécié la variété de sorts disponibles. Les effets visuels étaient spectaculaires, et l'ambiance de Poudlard était parfaitement recréée. Un must pour tous les fans d'Harry Potter!
            </p>
          </div>
          <div class="review">
            <h2>Arthur Brooks</h2>
            <div class="review-rating">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="far fa-star"></i>
            </div>
            <p>
              Une expérience époustouflante! Les duels de sorts étaient exaltants, et j'ai été impressionné par la qualité des graphismes et des effets sonores. Se déplacer dans Poudlard était comme entrer dans le monde magique de Harry Potter. Bravo aux développeurs pour ce jeu fantastique!
            </p>
          </div>
        </div>
      </section>
      
    </main>
    <footer>
      <div class="socials">
        <a href="#"><i class="fab fa-youtube"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
      </div>
      <div class="legal">
        <a href="#">Terms of Use</a>
        <p>&middot;</p>
        <a href="#">Privacy Policy</a>
        <p>&middot;</p>
        <p id="theme-change">Dark Mode</p>
      </div>
      <div class="copyright">
        <p>&copy; Eric Hubert, <span id="copy-date"></span></p>
      </div>
      <script async type="module">
        document.getElementById("copy-date").innerText =
          new Date().getFullYear();

        const themeChange = document.getElementById("theme-change");
        if (localStorage.getItem("theme") === "dark") {
          document.body.classList.add("dark");
          themeChange.innerText = "Light Mode";
        }
        themeChange.addEventListener("click", () => {
          console.log("test");
          document.body.classList.toggle("dark");
          localStorage.setItem(
            "theme",
            document.body.classList.contains("dark") ? "dark" : "light"
          );
          themeChange.innerText = document.body.classList.contains("dark")
            ? "Light Mode"
            : "Dark Mode";
        });
      </script>
    </footer>
  </body>
</html>
