<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="global.css" />
    <script
      defer
      src="https://kit.fontawesome.com/aa06e5f929.js"
      crossorigin="anonymous"
    ></script>
    <meta name="description" content="Harry Potter Trading Card Game" />
    <link
      rel="shortcut icon"
      href="assets/images/logo.png"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="profile.css" />
    <title>Harry Potter TCG</title>
  </head>
  <body>
    <header>
      <div class="logo">
        <img src="assets/images/logo.png" alt="" />
      </div>
      <nav>
        <ul class="navbar-list">
          <li>
            <a href="/">
              <i class="fas fa-house"></i>
              <span class="nav-link">Home</span></a
            >
          </li>
          <li>
            <a href="/rules"
              ><i class="fas fa-clipboard-check"></i
              ><span class="nav-link">Rules</span></a
            >
          </li>
          <li>
            <a href="/cards"
              ><i class="fas fa-sheet-plastic"></i
              ><span class="nav-link">Cards</span></a
            >
          </li>
        </ul>
      </nav>
      <div class="notifications hidden">
        <i class="fas fa-bell">
          <span class="notification-counter">0</span>
        </i>
      </div>
      <div class="trade hidden">
        <i class="fas fa-exchange-alt"></i>
      </div>
      <div class="login">
        <i class="fas fa-right-to-bracket"></i>
      </div>
      <div class="user hidden">
        <i class="fas fa-user-large"></i>
      </div>
      <div class="forms hidden">
        <form class="login-form" onsubmit="handleLogin(event)">
          <label for="login-email">Email adress</label>
          <input type="email" id="login-email" />
          <label for="login-password">Password</label>
          <input type="password" id="login-password" />
          <button type="submit">Login</button>

          <span class="tip">Register</span>
        </form>

        <form class="register-form hidden" onsubmit="handleRegister(event)">
          <label for="register-email">Email adress</label>
          <input type="email" id="register-email" />
          <label for="name">Username</label>
          <input type="text" id="name" />
          <label for="register-password">Password</label>
          <input type="password" id="register-password" />
          <button type="submit">Register</button>
          <span class="tip">Login</span>
        </form>

        <div class="user-menu hidden">
          <p class="user-name"></p>
          <p class="user-email"></p>
          <a href="/profile"><button>Profil</button></a>
          <button class="logout">
            <i class="fas fa-user-large-slash"></i>Logout
          </button>
        </div>
      </div>
      <script>
        const loginButton = document.querySelector(".login");
        const forms = document.querySelector(".forms");
        loginButton.addEventListener("click", () => {
          forms.classList.toggle("hidden");
        });

        document.querySelector(".trade").addEventListener("click", () => {
          document.querySelector("#trade-page").classList.remove("hidden");
          document.body.classList.add("trade-page-open");
          document
            .querySelector("#trade-page")
            .addEventListener("click", () => {
              document.querySelector("#trade-page").classList.add("hidden");
              document.body.classList.remove("trade-page-open");
            });

          document
            .querySelector(".trade-menu")
            .addEventListener("click", (e) => {
              e.stopPropagation();
            });

          updateSenderCards();
        });

        document
          .querySelector(".notifications")
          .addEventListener("click", () => {
            document
              .querySelector("#notifications-page")
              .classList.remove("hidden");
            document.body.classList.add("trade-page-open");
            document
              .querySelector("#notifications-page")
              .addEventListener("click", () => {
                document
                  .querySelector("#notifications-page")
                  .classList.add("hidden");
                document.body.classList.remove("trade-page-open");
              });

            document
              .querySelector(".notifications-menu")
              .addEventListener("click", (e) => {
                e.stopPropagation();
              });
          });

        function loginStatus() {
          if (localStorage.getItem("token")) {
            document.querySelector(".login").classList.add("hidden");
            document.querySelector(".user").classList.remove("hidden");
            document.querySelector(".forms").classList.add("hidden");
            document.querySelector(".trade").classList.remove("hidden");
            document.querySelector(".notifications").classList.remove("hidden");
          } else {
            document.querySelector(".login").classList.remove("hidden");
            document.querySelector(".user").classList.add("hidden");
            document.querySelector(".forms").classList.add("hidden");
            document.querySelector(".user-menu").classList.add("hidden");
            document.querySelector(".login-form").classList.remove("hidden");
            document.querySelector(".trade").classList.add("hidden");
            document.querySelector(".notifications").classList.add("hidden");
          }
        }
        loginStatus();

        function handleLogin(e) {
          e.preventDefault();
          const email = document.getElementById("login-email").value;
          const password = document.getElementById("login-password").value;
          fetch("/api/login", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, password }),
          })
            .then((response) => response.json())
            .then((data) => {
              localStorage.setItem("token", data.token);
              forms.classList.add("hidden");
              document.querySelector("#login-email").value = "";
              document.querySelector("#login-password").value = "";
              loginStatus();
            })
            .catch((error) => {
              console.error("There was an error!", error);
            });
        }

        function handleRegister(e) {
          e.preventDefault();
          const email = document.getElementById("register-email").value;
          const name = document.getElementById("name").value;
          const password = document.getElementById("register-password").value;
          fetch("/api/users", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, name, password }),
          })
            .then((response) => response.json())
            .then((data) => {
              localStorage.setItem("token", data.token);
              forms.classList.add("hidden");
              loginStatus();
            })
            .catch((error) => {
              console.error("There was an error!", error);
            });
        }

        const logoutButton = document.querySelector(".logout");
        logoutButton.addEventListener("click", () => {
          localStorage.removeItem("token");
          window.location.href = "/";
          loginStatus();
        });

        const userMenuButton = document.querySelector(".user");
        const userMenu = document.querySelector(".user-menu");
        const loginForm = document.querySelector(".login-form");
        userMenuButton.addEventListener("click", () => {
          forms.classList.toggle("hidden");
          userMenu.classList.toggle("hidden");
          loginForm.classList.add("hidden");
          fetch("/api/profile", {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${localStorage.getItem("token")}`,
            },
          })
            .then((response) => response.json())
            .then((data) => {
              document.querySelector(".user-name").innerText = data.name;
              document.querySelector(".user-email").innerText = data.email;
            })
            .catch((error) => {
              console.error("There was an error!", error);
            });
        });

        const tip = document.querySelectorAll(".tip");
        tip.forEach((element) => {
          element.addEventListener("click", () => {
            document.querySelector(".login-form").classList.toggle("hidden");
            document.querySelector(".register-form").classList.toggle("hidden");
          });
        });
      </script>
      <input type="checkbox" id="burger-toggle" />
      <label for="burger-toggle" class="burger-icon">
        <i class="fas fa-bars"></i>
      </label>
      <div class="burger-menu">
        <ul class="burger-menu-list">
          <li>
            <a href="/">
              <i class="fas fa-house"></i>
              <span>Home</span>
            </a>
          </li>
          <li>
            <a href="/rules">
              <i class="fas fa-clipboard-check"></i>
              <span>Rules</span>
            </a>
          </li>
          <li>
            <a href="/cards">
              <i class="fas fa-sheet-plastic"></i>
              <span>Cards</span>
            </a>
          </li>
        </ul>
      </div>
      <script defer>
        const burgerToggle = document.getElementById("burger-toggle");
        const burgerMenu = document.querySelector(".burger-menu");
        burgerToggle.addEventListener("change", () => {
          if (burgerToggle.checked) {
            burgerMenu.style.transform = "scaleY(1)";
          } else {
            burgerMenu.style.transform = "scaleY(0)";
          }
        });
      </script>
    </header>
    <main>
      <div class="profile">
        <div class="big-title">
          <h1>Profil</h1>
          <div class="profile-items">
            <p>
              Nom <span id="profile-name"></span>
              <i class="fas fa-signature"></i>
            </p>
            <p>
              Adresse e-mail <span id="profile-email"></span
              ><i class="fas fa-at"></i>
            </p>
            <p>
              Dernière maison visitée <span id="profile-house"></span
              ><i class="fa fa-house"></i>
            </p>
            <p>
              Ouvrir un booster
              <button id="profile-isboosteravailable">Ouvrir</button>
              <i class="fas fa-file-circle-plus"></i>
            </p>
          </div>
        </div>
        <div class="big-title">
          <h1>Vos cartes</h1>
          <div class="tags-container">Filtres :</div>
          <div class="cards-container" id="cards-container">
            <!-- <div>
                <img
                class="card-img"
                src="../../assets/images/cards/HarryPotter.png"
                alt=""
                />
                <h4>Harry Potter</h4>
            </div> -->
          </div>
        </div>
      </div>
      <script>
        window.addEventListener("pageshow", (event) => {
          if (event.persisted) {
            window.location.reload();
          }
          if (performance.navigation.type == 2) {
            location.reload();
          }
        });
        fetch("/api/profile", {
          headers: {
            Authorization: `Bearer ${localStorage.getItem("token")}`,
          },
        })
          .then((response) => response.json())
          .then((data) => {
            document.getElementById("profile-name").innerText = data.name;
            document.getElementById("profile-email").innerText = data.email;
            document.getElementById("profile-house").innerText =
              capitalizeFirstLetter(data.lastHouseVisited);
          })
          .catch((error) => {
            localStorage.removeItem("token");
            window.location.href = "/";
          });
        const updateBoosterButton = () => {
          fetch("/api/canuseropenbooster", {
            headers: {
              Authorization: `Bearer ${localStorage.getItem("token")}`,
            },
          })
            .then((response) => response.json())
            .then((data) => {
              document.getElementById("profile-isboosteravailable").disabled =
                !data.canOpen;
              if (!data.canOpen) {
                fetch("/api/timeuntilnextbooster", {
                  headers: {
                    Authorization: `Bearer ${localStorage.getItem("token")}`,
                  },
                })
                  .then((response) => response.json())
                  .then((data) => {
                    const timeInSeconds = data.timeUntilNextBooster;
                    const hours = Math.floor(timeInSeconds / 1000 / 60 / 60);
                    const minutes = Math.floor(
                      (timeInSeconds / 1000 / 60) % 60
                    );
                    document.getElementById(
                      "profile-isboosteravailable"
                    ).innerText = `Disponible dans ${hours}h${minutes
                      .toString()
                      .padStart(2, "0")}m`;
                  })
                  .catch((error) => {
                    console.error("There was an error!", error);
                  });
              }
            })
            .catch((error) => {
              console.error("There was an error!", error);
            });
        };
        updateBoosterButton();
        document
          .getElementById("profile-isboosteravailable")
          .addEventListener("click", () => {
            fetch("/api/openbooster", {
              method: "GET",
              headers: {
                Authorization: `Bearer ${localStorage.getItem("token")}`,
              },
            })
              .then((response) => response.json())
              .then((data) => {
                createCards();
                updateBoosterButton();
              })
              .catch((error) => {
                console.error("There was an error!", error);
              });
          });
      </script>
      <script>
        const createCards = async () => {
          try {
            const tagList = [
              "gryffindor",
              "slytherin",
              "ravenclaw",
              "hufflepuff",
            ];
            const container = document.querySelector(".cards-container");
            container.innerHTML = "";
            const tagsContainer = document.querySelector(".tags-container");

            tagsContainer.innerHTML = "Filtres :";
            function formatCheckboxTitle(string) {
              return " " + string.charAt(0).toUpperCase() + string.slice(1);
            }

            tagList.forEach((element) => {
              const tag = document.createElement("label");
              tag.classList.add("tag");
              const checkbox = document.createElement("input");
              checkbox.type = "checkbox";
              checkbox.value = element;
              checkbox.addEventListener("change", () => {
                const cards = document.querySelectorAll(".card-img");
                const checkedTags = Array.from(
                  document.querySelectorAll(".tag input:checked")
                ).map((checkbox) => checkbox.value);
                cards.forEach((card) => {
                  if (
                    checkedTags.length === 0 ||
                    checkedTags.some((tag) => card.classList.contains(tag))
                  ) {
                    card.parentElement.style.display = "flex";
                  } else {
                    card.parentElement.style.display = "none";
                  }
                });
              });
              tag.appendChild(checkbox);
              tag.appendChild(
                document.createTextNode(formatCheckboxTitle(element))
              );
              tagsContainer.appendChild(tag);
            });

            const imageResponse = await fetch("/api/usercards", {
              headers: {
                Authorization: `Bearer ${localStorage.getItem("token")}`,
              },
            });
            const userCardData = await imageResponse.json();
            userCardData.forEach((element) => {
              container.appendChild(document.createElement("div"));
              const div = container.lastChild;
              div.id = element.card.id;
              div.classList.add("card");
              const house = element.card.house || "no-house";
              div.addEventListener("click", () => {
                if (localStorage.getItem("token")) {
                  fetch(`/api/latesthouse`, {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                      Authorization: `Bearer ${localStorage.getItem("token")}`,
                    },
                    body: JSON.stringify({ house: house }),
                  })
                    .then((response) => {
                      if (response.status === 403) {
                        localStorage.removeItem("token");
                      }
                    })
                    .then(() => {
                      window.location.href = `/cards?id=${div.id}`;
                    })
                    .catch((error) => {
                      console.error("There was an error!", error);
                    });
                } else {
                  window.location.href = `/cards?id=${div.id}`;
                }
              });
              let img = document.createElement("img");
              img.classList.add("card-img");
              img.src = `/assets/images/cards/${element.card.image}`;
              img.alt = element.card.name;
              img.classList.add(element.card.house || "no-house");
              div.appendChild(img);
              const fav = document.createElement("i");
              fav.classList.add("fa-star");
              if (element.isFavorite) {
                fav.classList.add("fa-solid");
              } else {
                fav.classList.add("fa-regular");
              }
              fav.addEventListener("click", () => {
                event.stopPropagation();
                fetch("/api/usercards/favorite", {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${localStorage.getItem("token")}`,
                  },
                  body: JSON.stringify({
                    cardId: element.card.id,
                    setTo: !element.isFavorite,
                  }),
                }).then(() => createCards());
              });
              div.appendChild(fav);
              const houseName = document.createElement("p");
              houseName.innerText =
                capitalizeFirstLetter(element.card.house) || "Pas de maison";
              houseName.classList.add("house-name");
              switch (element.card.house) {
                case "gryffindor":
                  houseName.style.color = "red";
                  break;
                case "slytherin":
                  houseName.style.color = "green";
                  break;
                case "ravenclaw":
                  houseName.style.color = "blue";
                  break;
                case "hufflepuff":
                  houseName.style.color = "olive";
                  break;
                default:
                  houseName.style.color = "black";
              }
              div.appendChild(houseName);
              let title = document.createElement("h4");
              title.innerText = element.card.name;
              div.appendChild(title);
            });
          } catch (error) {
            console.error("Erreur lors du traitement des images :", error);
          }
        };

        createCards();

        function capitalizeFirstLetter(string) {
          return string.charAt(0).toUpperCase() + string.slice(1);
        }
      </script>

      <div class="hidden" id="notifications-page">
        <div class="notifications-menu">
          <h2>Notifications</h2>
          <div class="notifications-container"></div>
        </div>

        <script>
          async function displayNotifications() {
            const notificationsContainer = document.querySelector(
              ".notifications-container"
            );
            fetch("/api/trades/received", {
              headers: {
                Authorization: `Bearer ${localStorage.getItem("token")}`,
              },
            })
              .then((response) => response.json())
              .then(async (data) => {
                if (data.length === 0) {
                  document
                    .querySelector(".notification-counter")
                    .classList.add("hidden");
                  notifButton = document.querySelector(".notifications");
                  notifButton.inert = true;
                  notifButton.style.color = "gray";
                }
                document.querySelector(".notification-counter").innerText =
                  data.length;
                data.forEach(async (trade) => {
                  const response = fetch(`/api/users/${trade.senderId}`);
                  const sender = await response.then((res) => res.json());
                  const notification = document.createElement("div");
                  notification.classList.add("notification");
                  const p = document.createElement("p");
                  p.innerText = `Demande d'échange de ${sender.name}`;
                  notification.appendChild(p);
                  const cardsListsSeparator = document.createElement("div");
                  cardsListsSeparator.classList.add("cards-lists-separator");
                  const senderCardsList = document.createElement("div");
                  senderCardsList.id = "trade-sender-cards-list";
                  const senderCardsListLabel = document.createElement("div");
                  senderCardsListLabel.innerText = "Vous recevrez :";
                  const receiverCardsList = document.createElement("div");
                  receiverCardsList.id = "trade-receiver-cards-list";
                  const receiverCardsListLabel = document.createElement("div");
                  receiverCardsListLabel.innerText = "Contre :";
                  senderCardsList.appendChild(senderCardsListLabel);
                  receiverCardsList.appendChild(receiverCardsListLabel);
                  trade.cards.forEach(async (card) => {
                    console.log(card.userCardId, card.isSender);
                    const userCardResponse = fetch(
                      `/api/usercards/${card.userCardId}`
                    );
                    const userCard = await userCardResponse.then((res) =>
                      res.json()
                    );
                    const div = document.createElement("div");
                    div.classList.add("card");
                    div.innerText = "- " + userCard.card.name;
                    if (card.isSender) {
                      senderCardsList.appendChild(div);
                    } else {
                      receiverCardsList.appendChild(div);
                    }
                  });
                  cardsListsSeparator.appendChild(senderCardsList);
                  cardsListsSeparator.appendChild(receiverCardsList);

                  notification.appendChild(cardsListsSeparator);

                  const buttonContainer = document.createElement("div");
                  buttonContainer.classList.add("button-container");

                  const denyButton = document.createElement("button");
                  denyButton.innerText = "Refuser";
                  denyButton.addEventListener("click", () => {
                    fetch(`/api/trades/${trade.id}/deny`, {
                      headers: {
                        Authorization: `Bearer ${localStorage.getItem(
                          "token"
                        )}`,
                        json: { tradeId: parseInt(trade.id) },
                      },
                    }).then(() => {
                      notification.remove();
                    });
                  });
                  buttonContainer.appendChild(denyButton);
                  const acceptButton = document.createElement("button");
                  acceptButton.innerText = "Accepter";
                  acceptButton.addEventListener("click", () => {
                    fetch(`/api/trades/${trade.id}/accept`, {
                      headers: {
                        Authorization: `Bearer ${localStorage.getItem(
                          "token"
                        )}`,
                      },
                    }).then(() => {
                      notification.remove();
                      updateSenderCards();
                      createCards();
                    });
                  });
                  buttonContainer.appendChild(acceptButton);
                  notification.appendChild(buttonContainer);
                  notificationsContainer.appendChild(notification);
                });
              })
              .catch((error) => {
                console.error("There was an error!", error);
              });
          }

          displayNotifications();
        </script>
      </div>

      <!-- MARK: Trade -->
      <div class="hidden" id="trade-page">
        <div class="trade-menu">
          <form id="trade-form" onsubmit="sendTradeRequest(event)">
            <label for="trade-user">Utilisateur :</label>
            <select name="user" id="trade-user">
              <option value="0" selected>Choisissez un destinataire</option>
            </select>
            <div class="cards-separator">
              <div>
                <label for="trade-sender-cards">Vos cartes :</label>
                <div id="trade-sender-cards"></div>
              </div>
              <div>
                <label for="trade-receiver-cards">Ses cartes :</label>
                <div id="trade-receiver-cards"></div>
              </div>
            </div>
            <button type="submit">Envoyer la demande d'échange</button>

            <script defer>
              let selectedSenderCards = [];
              let selectedReceiverCards = [];

              const userSelect = document.getElementById("trade-user");

              userSelect.addEventListener("change", () => {
                updateReceiverCards();
              });

              fetch("/api/users")
                .then((response) => response.json())
                .then((data) => {
                  data.forEach((user) => {
                    const token = localStorage.getItem("token");
                    const userId = JSON.parse(atob(token.split(".")[1])).id;
                    if (user.id != userId) {
                      const option = document.createElement("option");
                      option.value = user.id;
                      option.innerText = user.name;
                      userSelect.appendChild(option);
                    }
                  });
                })
                .catch((error) => {
                  console.error("There was an error!", error);
                });
              const senderCards = document.getElementById("trade-sender-cards");
              function updateSenderCards() {
                senderCards.innerHTML = "";
                fetch("/api/usercards", {
                  headers: {
                    Authorization: `Bearer ${localStorage.getItem("token")}`,
                  },
                })
                  .then((response) => response.json())
                  .then((data) => {
                    data.forEach((element) => {
                      const div = document.createElement("div");
                      div.id = element.id;
                      div.classList.add("card");
                      const img = document.createElement("img");
                      img.classList.add("card-img");
                      img.src = `/assets/images/cards/${element.card.image}`;
                      img.alt = element.card.name;
                      img.classList.add(element.card.house || "no-house");
                      div.appendChild(img);
                      const sel = document.createElement("i");
                      sel.classList.add("fa-circle-check");
                      sel.classList.add("fa-solid");
                      sel.classList.add("hidden");
                      div.addEventListener("click", () => {
                        sel.classList.toggle("hidden");
                        if (sel.classList.contains("hidden")) {
                          selectedSenderCards = selectedSenderCards.filter(
                            (card) => card !== parseInt(div.id)
                          );
                        } else {
                          selectedSenderCards.push(parseInt(div.id));
                        }
                      });
                      div.appendChild(sel);
                      const title = document.createElement("h4");
                      title.innerText = element.card.name;
                      div.appendChild(title);
                      senderCards.appendChild(div);
                    });
                  });
              }
              function updateReceiverCards() {
                const receiverId = userSelect.value || 1;
                fetch(`/api/users/${receiverId}/cards`, {
                  headers: {
                    "Content-Type": "application/json",
                  },
                })
                  .then((response) => response.json())
                  .then((data) => {
                    const receiverCards = document.getElementById(
                      "trade-receiver-cards"
                    );
                    receiverCards.innerHTML = "";
                    data.forEach((element) => {
                      const div = document.createElement("div");
                      div.id = element.id;
                      div.classList.add("card");
                      const img = document.createElement("img");
                      img.classList.add("card-img");
                      img.src = `/assets/images/cards/${element.card.image}`;
                      img.alt = element.card.name;
                      img.classList.add(element.card.house || "no-house");
                      div.appendChild(img);
                      const sel = document.createElement("i");
                      sel.classList.add("fa-circle-check");
                      sel.classList.add("fa-solid");
                      sel.classList.add("hidden");
                      div.addEventListener("click", () => {
                        sel.classList.toggle("hidden");
                        if (sel.classList.contains("hidden")) {
                          selectedReceiverCards = selectedReceiverCards.filter(
                            (card) => card !== parseInt(div.id)
                          );
                        } else {
                          selectedReceiverCards.push(parseInt(div.id));
                        }
                      });
                      div.appendChild(sel);
                      const title = document.createElement("h4");
                      title.innerText = element.card.name;
                      div.appendChild(title);
                      receiverCards.appendChild(div);
                    });
                  });
              }

              function sendTradeRequest(e) {
                e.preventDefault();
                if (
                  userSelect.value === "0" ||
                  (selectedSenderCards.length === 0 &&
                    selectedReceiverCards.length === 0)
                ) {
                  console.log("not valid");
                  return;
                }
                console.log(selectedReceiverCards, selectedSenderCards);
                fetch("/api/trades", {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${localStorage.getItem("token")}`,
                  },
                  body: JSON.stringify({
                    senderCards: selectedSenderCards,
                    receiverCards: selectedReceiverCards,
                    receiverId: parseInt(userSelect.value),
                  }),
                });

                document.querySelector("#trade-page").classList.add("hidden");
              }

              updateSenderCards();
              updateReceiverCards();
            </script>
          </form>
        </div>
      </div>
    </main>
    <footer>
      <div class="socials">
        <a href="#"><i class="fab fa-youtube"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
      </div>
      <div class="legal">
        <a href="#">Terms of Use</a>
        <p>&middot;</p>
        <a href="#">Privacy Policy</a>
      </div>
      <div class="copyright">
        <p>&copy; Eric Hubert, <span id="copy-date"></span></p>
      </div>
      <script async type="module">
        document.getElementById("copy-date").innerText =
          new Date().getFullYear();
      </script>
    </footer>
  </body>
</html>
